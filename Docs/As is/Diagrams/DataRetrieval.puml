@startuml
autonumber
skinparam backgroundColor white

actor "Пользователь" as User
participant "API Gateway" as GW
participant "Auth Service" as Auth
participant "Billing Service" as BS
database "Billing DB" as BDB

User -> GW : GET /api/billing/all
note right of GW : Проверка JWT в заголовке

GW -> Auth : GET /api/auth/validate?token=...
Auth --> GW : 200 OK (Valid: true)

GW -> BS : GET /api/billing/all
BS -> BDB : SQL: SELECT * FROM bills
BDB --> BS : Result Set (Entities)

BS -> BS : Mapping: Entity to DTO
BS --> GW : 200 OK (JSON Array)
GW --> User : 200 OK (Data Display)
@enduml


